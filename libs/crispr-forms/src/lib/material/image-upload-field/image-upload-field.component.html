<crispr-field-container
  [config]="config"
  [group]="group">

  <mat-form-field floatLabel="always"
    [color]="config.color"
    appearance="outline"
    [formGroup]="group">
    <mat-label>{{config.label}}</mat-label>
    <input [formControlName]="config.controlName" matInput type="text"/>
    <input
      #fileInput
      type="file"
      capture="user" accept="audio/*"
      [accept]="config.acceptedTypes"
      multiple="false"
      (change)="filesChanged($event.target.files)"/>
    <div class="ui-container">

      <div class="image-preview" [style.height]="config.imageHeight">
        <img *ngIf="(imageUrlString$ | async) || ((control.valueChanges | async) && value) as srcUrl; else noImage" [src]="srcUrl" alt="">
        <ng-template #noImage>
          <div class="drop-container"
            [crisprFileDropzone]="!(disabled$ | async) && !(config.disableOnUpload && isUploaded)"
            (fileDrop)="filesChanged($event)">
            <mat-icon class="drop-icon" inline="true">cloud_upload</mat-icon>
            <h2 class="mat-h2">{{config.dropZoneText}}</h2>
          </div>

        </ng-template>
      </div>



      <!-- </ng-template> -->
      <div class="button-container" *ngIf="true">

        <button
          mat-button
          (click)="clearFileInput()"
          type="button"
          [disabled]="(disabled$ | async) || (config.disableOnUpload && isUploaded)"
          aria-label="Remove Selected File(s)">
          <mat-icon>delete</mat-icon>
          {{config.clearFilesButtonText}}
        </button>

        <button
          mat-button
          (click)="resetToInitialValue(value)"
          type="button"
          [disabled]="(disabled$ | async) || (config.disableOnUpload && isUploaded)"
          aria-label="Remove Selected File(s)">
          <mat-icon>replay</mat-icon>
          {{config.resetFilesButtonText}}
        </button>

        <button
          *ngIf="!!config.uploadFiles"
          mat-button
          type="button"
          color="accent"
          class="file-input-button"
          [disabled]="(disabled$ | async) || (config.disableOnUpload && isUploaded)"
          (click)="uploadFiles()"
          [attr.aria-label]="config.uploadButtonText">
          <mat-icon>file_upload</mat-icon>
          {{ config.uploadButtonText }}
        </button>

        <button
          mat-button
          type="button"
          color="primary"
          [disabled]="(disabled$ | async) || config.disableOnUpload && isUploaded"
          (click)="fileInput.click()"
          [attr.aria-label]="config.controlName">
          <mat-icon>
            camera
          </mat-icon>
          SELECT
        </button>
      </div>
    </div>

  </mat-form-field>

</crispr-field-container>
<ng-container *ngIf="compressedFile$ | async"></ng-container>
